= generators-jvm
Pedro Lamarao <pedro.lamarao@gmail.com>

Continuation-based generators for the JVM.

Module `generators` contain the core classes, `AbstractGenerator` and `RunnableGenerator`.

Applications are demonstrated in `readers`.

== building

Have `JAVA_HOME` point to a JDK version 19.

Compilation will use a JDK version 20 automatically provisioned by Gradle.

To build and run automated tests: `./gradlew build`

To build benchmarks: `./gradlew jmhJar`

To run benchmarks: `./gradlew jmh`

You may manually run a benchmark by doing something like:

[source,shell]
----
java --add-exports java.base/jdk.internal.vm=ALL-UNNAMED --enable-preview -jar .\readers\ber\build\libs\ber-1.0-SNAPSHOT-jmh.jar -h
----

== using

Compiling with a JDK version 20 is required.

JARs are currently not published anywhere.

To configure a Gradle project:

.build.gradle.kts
[source,gradle]
----
plugins {
    id("java")
}

dependencies {
    implementation("br.dev.pedrolamarao.generators:generators:1.0-SNAPSHOT")
}

tasks.withType<JavaCompile>().configureEach {
    options.compilerArgs = listOf("--add-exports","java.base/jdk.internal.vm=br.dev.pedrolamarao.generators","--enable-preview")
}

tasks.withType<Test>().configureEach {
    jvmArgs = listOf("--add-exports","java.base/jdk.internal.vm=br.dev.pedrolamarao.generators","--enable-preview")
}
----
